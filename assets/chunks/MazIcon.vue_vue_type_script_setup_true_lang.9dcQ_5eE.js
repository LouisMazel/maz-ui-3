import{i as T}from"./inject-strict.aPooVEJM.js";import{d as x,h as m,g as v,j as L,z as P,o as _,c as A,M as C,e as $,P as q}from"./framework.z3pCfM0g.js";const H=["innerHTML"],V=x({__name:"MazIcon",props:{src:{type:String,default:void 0},path:{type:String,default:void 0},name:{type:String,default:void 0},size:{type:String,default:void 0},title:{type:String,default:void 0},transformSource:{type:Function,default:a=>a}},emits:["loaded","unloaded","error"],setup(a,{emit:p}){const l={},s=m(),u=m(),g=()=>{try{return T("mazIconPath")}catch{return}},o=a,c=p,d=v(()=>o.path??g()),h=v(()=>o.src?o.src:d.value?`${d.value}/${o.name}.svg`:`/${o.name}.svg`);L(()=>{!o.name&&!o.src&&console.error('[maz-ui](MazIcon) you should provide "name" or "src" as prop')});const S=(e,r)=>{const t=e.querySelectorAll("title");if(t.length>0)t[0].textContent=r;else{const n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=r,e.append(n)}},w=e=>Object.keys(e).reduce((r,t)=>(e[t]!==!1&&e[t]!==null&&e[t]!==void 0&&(r[t]=e[t]),r),{}),y=e=>{const r={},t=e.attributes;if(!t)return r;for(let n=t.length-1;n>=0;n--)r[t[n].name]=t[n].value;return r},E=e=>{let r=e.cloneNode(!0);return r=o.transformSource(e),o.title&&S(r,o.title),e.innerHTML},M=async e=>{l[e]||(l[e]=z(e));try{s.value=await l[e],await q(),c("loaded",u.value)}catch(r){s.value&&(s.value=void 0,c("unloaded")),delete l[e],c("error",r)}},z=e=>new Promise((r,t)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.addEventListener("load",()=>{if(n.status>=200&&n.status<400)try{let i=new DOMParser().parseFromString(n.responseText,"text/xml").querySelectorAll("svg")[0];i?(i=o.transformSource(i),r(i)):t(new Error('Loaded file is not valid SVG"'))}catch(f){t(f)}else t(new Error("Error loading SVG"))}),n.addEventListener("error",()=>t()),n.send()});return P(()=>M(h.value)),(e,r)=>s.value?(_(),A("svg",C({key:0,ref_key:"svgElem",ref:u,width:"1em",height:"1em"},{...y(s.value),...w(e.$attrs)},{style:`font-size: ${a.size}`,innerHTML:E(s.value)}),null,16,H)):$("",!0)}});export{V as _};
