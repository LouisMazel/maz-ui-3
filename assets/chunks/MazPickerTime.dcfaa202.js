import{d as W,h as q,g as n,x as B,O as _,o as d,c as h,F as M,D as w,n as g,k as b,N as S,b as G,w as J,a as K,t as Q,a0 as R,_ as U}from"./framework.2f2ffdc4.js";import{f as P,s as X,M as Y}from"./index.9a81d342.js";import{d as i}from"./dayjs.min.04d70162.js";import"./chart.705aa2e5.js";import"./use-maz-dialog-promise.19b207b6.js";import"./zoom-img.f640e524.js";import"./lazy-img.87039f3b.js";import"./inject-strict.2518d623.js";import"./currency.a4106e0e.js";import"./click-outside.655c477b.js";import"./date.0d08a58e.js";import"./capitalize.43002998.js";const Z={class:"m-picker-time__column__items"},E=W({__name:"MazPickerTime",props:{modelValue:{type:[String,Object],default:void 0},calendarDate:{type:String,required:!0},formatterOptions:{type:Object,required:!0},locale:{type:String,required:!0},color:{type:String,required:!0},isOpen:{type:Boolean,required:!0},hasDate:{type:Boolean,required:!0},minuteInterval:{type:Number,required:!0},disabledHours:{type:Array,default:void 0},format:{type:String,required:!0},isHour12:{type:Boolean,required:!0},minDate:{type:String,default:void 0},maxDate:{type:String,default:void 0},disabled:{type:Boolean,required:!0}},emits:["update:model-value"],setup(p,{emit:T}){const s=p,$=e=>{if(!s.disabledHours)return e;const t=Array.from({length:24},(a,u)=>u).filter(a=>{var u;return!((u=s.disabledHours)!=null&&u.includes(a))}),r=P(t,e);return r!==e&&x("hour",i(o.value).set("hour",r)),r},z=T,l=q(),m=q(),v=n(()=>typeof o.value=="string"?$(i(o.value).get("hour")):void 0),A=n(()=>typeof o.value=="string"?P(k.value.map(({value:e})=>e.get("minute")),i(o.value).get("minute")):void 0),N=e=>{if(s.isHour12){const r=y.value==="pm"?e+12:e;return r===12?0:r===24?12:r}else return e},C=n(()=>Array.from({length:s.isHour12?12:24},(e,t)=>t).map(e=>{const t=e+(s.isHour12?1:0),r=N(t),a=i(o.value).set("hour",r),u=j(r)||(s.minDate&&o.value?i(s.minDate).isAfter(a,"hour"):!1)||(s.maxDate&&o.value?i(s.maxDate).isBefore(a,"hour"):!1);return{label:`${t<10?"0":""}${t}`,value:i(o.value).set("hour",r),isDisabled:u}})),k=n(()=>{const e=Math.floor(60/s.minuteInterval)-0;return Array.from({length:e},(t,r)=>r*s.minuteInterval).map(t=>{const r=i(o.value).set("minute",t),a=(s.minDate&&o.value?i(s.minDate).isAfter(r,"minute"):!1)||(s.maxDate&&o.value?i(s.maxDate).isBefore(r,"minute"):!1);return{label:`${t<10?"0":""}${t}`,value:r,isDisabled:a}})}),y=n(()=>typeof v.value=="number"?v.value>=12?"pm":"am":void 0),O=n(()=>s.isHour12?[{label:"AM",value:"am"},{label:"PM",value:"pm"}]:[]),V=n(()=>{const e=[{identifier:"hour",values:C.value},{identifier:"minute",values:k.value}];return s.isHour12&&e.push({identifier:"ampm",values:O.value}),e}),o=n({get:()=>s.modelValue,set:e=>{z("update:model-value",e)}});B(()=>s.isOpen,async e=>{var t;if(e){if(await _(),l.value){const r=l.value.querySelector(".m-picker-time__column .m-btn"),a=r==null?void 0:r.offsetHeight,c=((t=l.value)==null?void 0:t.offsetHeight)/2-a/2;m.value=c/16}H(!1)}},{immediate:!0}),B(()=>s.modelValue,async(e,t)=>{e!==t&&(await _(),H(!0))},{immediate:!0});const H=e=>{f("hour",e),f("minute",e),s.isHour12&&f("ampm",e)},j=e=>(s.disabledHours&&s.disabledHours.includes(e))??!1,D=(e,t)=>t==="am"||t==="pm"?y.value===t:e==="hour"?v.value===t.get(e):e==="minute"?A.value===t.get(e):!1,f=async(e,t=!0)=>{if(l.value){const r=l.value.querySelector(`.m-picker-time__column__${e}`),a=l.value.querySelector(`.m-picker-time__column__${e} .--is-selected`);m.value&&r&&a&&l.value&&(await _(),X(r,a,m.value*16,t))}},x=async(e,t)=>{const r=i(o.value);if(e==="hour"&&typeof t=="object"&&(o.value=r.set("hour",t.get("hour")).format()),e==="minute"&&typeof t=="object"){const a=r.set("minute",t.get("minute"));o.value=a.format()}if(e==="ampm"&&(y.value!==t||!v.value)&&(t==="am"&&(o.value=r.set("hour",r.get("hour")).subtract(12,"hour").format()),t==="pm")){const a=r.get("hour"),u=a+12>12&&a+12<24?a+12:a===0?12:a;o.value=r.set("hour",u).format()}await _(),f(e)};return(e,t)=>(d(),h("div",{ref_key:"MazPickerTime",ref:l,class:g(["m-picker-time",{"--has-date":p.hasDate}])},[(d(!0),h(M,null,w(V.value,({values:r,identifier:a},u)=>(d(),h("div",{key:u,class:g(["m-picker-time__column",[`m-picker-time__column__${a}`]])},[b("div",{style:S({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4),b("div",Z,[(d(!0),h(M,null,w(r,({value:c,label:I,isDisabled:L},F)=>(d(),G(Y,{key:F,size:"xs",color:D(a,c)?p.color:"transparent",class:g({"--is-selected":D(a,c)}),disabled:L||p.disabled,type:"button",onClick:R(ee=>x(a,c),["stop"])},{default:J(()=>[K(Q(I),1)]),_:2},1032,["color","class","disabled","onClick"]))),128))]),b("div",{style:S({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4)],2))),128))],2))}});const pe=U(E,[["__scopeId","data-v-463999ca"]]);export{pe as default};
