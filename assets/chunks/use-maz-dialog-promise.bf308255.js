import{h,g as u,j as y}from"./framework.2ee4885b.js";const g={darkClass:"dark",lightClass:"light",storageThemeKey:"theme",storageThemeValueDark:"dark",storageThemeValueLight:"light",storageThemeValueSystem:"system"},o=h("system");function c({darkClass:e,lightClass:t,storageThemeKey:s,storageThemeValueDark:a,setLocalStorageValue:l=!0,setThemeValue:r=!0}){document.documentElement.classList.remove(t),document.documentElement.classList.add(e),r&&(o.value=a),l&&(localStorage[s]=a)}function n({darkClass:e,lightClass:t,storageThemeKey:s,storageThemeValueLight:a,setLocalStorageValue:l=!0,setThemeValue:r=!0}){document.documentElement.classList.remove(e),document.documentElement.classList.add(t),r&&(o.value=a),l&&(localStorage[s]=a)}function f(e){document.documentElement.classList.remove(e.darkClass),document.documentElement.classList.remove(e.lightClass),o.value=e.storageThemeValueSystem,e.setLocalStorageValue&&(localStorage[e.storageThemeKey]=e.storageThemeValueSystem),S({...e,setThemeValue:!1})}function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function S(e){return localStorage[e.storageThemeKey]===e.storageThemeValueDark||!(e.storageThemeKey in localStorage)&&i()||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&i()?c({...e,setLocalStorageValue:!1}):n({...e,setLocalStorageValue:!1})}function T({shouldSetDarkMode:e,...t}){return typeof e!="boolean"?f(t):e?c(t):n(t)}function L(e){return localStorage[e.storageThemeKey]===e.storageThemeValueDark?n(e):c(e)}function E(e=g){const t={...g,...e},s=u(()=>o.value===t.storageThemeValueDark),a=u(()=>o.value===t.storageThemeValueLight),l=u(()=>o.value===t.storageThemeValueSystem);return y(()=>{o.value=localStorage[t.storageThemeKey]}),{autoSetTheme:()=>S(t),toggleTheme:()=>L(t),setSystemTheme:()=>f({...t,setLocalStorageValue:!0}),setDarkTheme:()=>T({...t,shouldSetDarkMode:!0}),setLightTheme:()=>T({...t,shouldSetDarkMode:!1}),hasDarkTheme:s,hasLightTheme:a,hasSystemTheme:l,theme:o}}const V=h(),m=h([]),D=(e,t)=>new Promise((s,a)=>{m.value=[...m.value,{id:e,isActive:!0,resolve:async()=>{await(t==null?void 0:t()),s(!0)},reject:a}]}),v=e=>(m.value=m.value.filter(({id:t})=>t!==e),m.value),d=(e,t,s=!1)=>{var a;t&&((a=t[e])==null||a.call(t,s),t.isActive=!1,setTimeout(()=>{v(t.id)},500))},K=()=>({confirmDialogData:V,dialogState:m,showDialogAndWaitChoice:D,removeDialogFromState:v,rejectDialog:(e,t=!1)=>d("reject",e,t),resolveDialog:(e,t=!1)=>d("resolve",e,t)});export{E as a,K as u};
