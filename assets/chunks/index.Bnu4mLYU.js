import{C as P,k as L,D as R,l as j,n as q,o as F,R as I,q as K,S as U}from"./chart.nVR4Bvnt.js";import{d as A,h as k,G as D,j as z,a7 as G,y as T,ay as x,ap as E,az as $,aA as O}from"./framework.8i3UnM_o.js";const w={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},H={type:{type:String,required:!0},...w},J=$[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function i(t){return O(t)?x(t):t}function N(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return O(e)?new Proxy(t,{}):t}function Q(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function M(t,e){t.labels=e}function S(t,e,n){const r=[];t.datasets=e.map(a=>{const s=t.datasets.find(d=>d[n]===a[n]);return!s||!a.data||r.includes(s)?{...a}:(r.push(s),Object.assign(s,a),s)})}function V(t,e){const n={labels:[],datasets:[]};return M(n,t.labels),S(n,t.datasets,e),n}function Z(t,e){return t.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1)}function _(t,e){return t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1)}function tt(t,e){return t.getElementsAtEventForMode(e,"index",{intersect:!0},!1)}const W=A({props:H,setup(t,e){let{expose:n}=e;const r=k(null),a=D(null);n({chart:a});const s=()=>{if(!r.value)return;const{type:o,data:g,options:y,plugins:f,datasetIdKey:m}=t,v=V(g,m),u=N(v,g);a.value=new P(r.value,{type:o,data:u,options:{...y},plugins:f})},d=()=>{const o=x(a.value);o&&(o.destroy(),a.value=null)},p=o=>{o.update(t.updateMode)};return z(s),G(d),T([()=>t.options,()=>t.data],(o,g)=>{let[y,f]=o,[m,v]=g;const u=x(a.value);if(!u)return;let b=!1;if(y){const c=i(y),h=i(m);c&&c!==h&&(Q(u,c),b=!0)}if(f){const c=i(f.labels),h=i(v.labels),C=i(f.datasets),B=i(v.datasets);c!==h&&(M(u.config.data,c),b=!0),C&&C!==B&&(S(u.config.data,C,t.datasetIdKey),b=!0)}b&&p(u)},{deep:!0}),()=>E("canvas",{ref:r})}});function l(t,e){return P.register(e),A({props:w,setup(n,r){let{expose:a}=r;const s=D(null),d=p=>{s.value=p==null?void 0:p.chart};return a({chart:s}),()=>E(W,J({ref:d},{type:t,...n}))}})}const et=l("bar",L),nt=l("doughnut",R),at=l("line",j),st=l("pie",q),rt=l("polarArea",F),ot=l("radar",I),lt=l("bubble",K),ut=l("scatter",U);export{et as Bar,lt as Bubble,W as Chart,nt as Doughnut,at as Line,st as Pie,rt as PolarArea,ot as Radar,ut as Scatter,l as createTypedChart,Z as getDatasetAtEvent,_ as getElementAtEvent,tt as getElementsAtEvent};
