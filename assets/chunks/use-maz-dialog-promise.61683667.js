import{d as p,h as c,p as C,w as A}from"./framework.3bbcd9ab.js";const f="--backdrop-present",b=()=>{document.documentElement.classList.add(f)},k=async()=>{document.querySelector(".m-backdrop.--present")||document.documentElement.classList.remove(f)},w=p({inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},teleportSelector:{type:String,default:"body"},beforeClose:{type:Function,default:void 0},persistent:{type:Boolean,default:!1},noCloseOnEscKey:{type:Boolean,default:!1},transitionName:{type:String,default:"backdrop-anim"},backdropClass:{type:[Array,String,Object],default:void 0},backdropContentClass:{type:[Array,String,Object],default:void 0}},emits:["open","before-close","close","update:model-value"],setup(e,{emit:t}){const o=c(e.modelValue),a=()=>{_(!1)},_=async s=>{var m;s||(t("before-close"),await((m=e.beforeClose)==null?void 0:m.call(e))),o.value=s},r=()=>{t("open")},v=()=>{t("update:model-value",!1),t("close"),l()},y=()=>{e.persistent||a()},d=s=>{!e.noCloseOnEscKey&&s.key==="Escape"&&!e.persistent&&a()},u=()=>{b(),document.addEventListener("keyup",d,!1)},l=()=>{document.removeEventListener("keyup",d),k()};return C(()=>{e.modelValue?u():l()}),A(()=>e.modelValue,s=>{o.value=s,s?u():l()}),{onBackdropAnimationEnter:r,onBackdropAnimationLeave:v,onBackdropClicked:y,close:a,present:o,toggleModal:_,onKeyPress:d}}});const E=c(),n=c([]),S=(e,t)=>new Promise((o,a)=>{n.value=[...n.value,{id:e,isActive:!0,resolve:async()=>{await(t==null?void 0:t()),o(!0)},reject:a}]}),i=e=>(n.value=n.value.filter(({id:t})=>t!==e),n.value),B=(e,t=!1)=>{var o;e&&((o=e.reject)==null||o.call(e,t),e.isActive=!1,setTimeout(()=>{i(e.id)},500))},M=(e,t=!0)=>{var o;e&&((o=e.resolve)==null||o.call(e,t),e.isActive=!1,setTimeout(()=>{i(e.id)},500))},x=()=>({confirmDialogData:E,dialogState:n,showDialogAndWaitChoice:S,removeDialogFromState:i,rejectDialog:B,resolveDialog:M});export{w as _,x as u};
