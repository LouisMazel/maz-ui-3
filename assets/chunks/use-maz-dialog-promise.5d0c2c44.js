import{u as A,d as c,A as C,q as g}from"./framework.0fefaf94.js";const _="--backdrop-present",k=()=>{document.documentElement.classList.add(_)},E=async()=>{document.querySelector(".m-backdrop.--present")||document.documentElement.classList.remove(_)},D=A({inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},teleportSelector:{type:String,default:"body"},beforeClose:{type:Function,default:void 0},persistent:{type:Boolean,default:!1},noCloseOnEscKey:{type:Boolean,default:!1},transitionName:{type:String,default:"backdrop-anim"},backdropClass:{type:[Array,String,Object],default:void 0},backdropContentClass:{type:[Array,String,Object],default:void 0}},emits:["open","before-close","close","update:model-value"],setup(t,{emit:e}){const s=c(t.modelValue),o=()=>{i(!1)},i=async n=>{var u;n||(e("before-close"),await((u=t.beforeClose)==null?void 0:u.call(t))),s.value=n},v=()=>{e("open")},y=()=>{e("update:model-value",!1),e("close"),d()},p=()=>{t.persistent||o()},l=n=>{!t.noCloseOnEscKey&&n.key==="Escape"&&!t.persistent&&o()},r=()=>{k(),document.addEventListener("keyup",l,!1)},d=()=>{document.removeEventListener("keyup",l),E()};return C(()=>{t.modelValue?r():d()}),g(()=>t.modelValue,n=>{s.value=n,n?r():d()}),{onBackdropAnimationEnter:v,onBackdropAnimationLeave:y,onBackdropClicked:p,close:o,present:s,toggleModal:i,onKeyPress:l}}});const b=c(),a=c([]),S=(t,e)=>new Promise((s,o)=>{a.value=[...a.value,{id:t,isActive:!0,resolve:async()=>{await(e==null?void 0:e()),s(!0)},reject:o}]}),f=t=>(a.value=a.value.filter(({id:e})=>e!==t),a.value),m=(t,e,s=!1)=>{var o;e&&((o=e[t])==null||o.call(e,s),e.isActive=!1,setTimeout(()=>{f(e.id)},500))},L=()=>({confirmDialogData:b,dialogState:a,showDialogAndWaitChoice:S,removeDialogFromState:f,rejectDialog:(t,e=!1)=>m("reject",t,e),resolveDialog:(t,e=!1)=>m("resolve",t,e)});export{D as _,L as u};
