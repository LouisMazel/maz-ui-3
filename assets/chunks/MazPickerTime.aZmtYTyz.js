import{d as W,h as B,g as n,y as w,P as h,o as d,c as y,F as x,E as M,n as g,k as b,O as S,b as E,w as G,t as J,a as K,a1 as Q,_ as R}from"./framework.z3pCfM0g.js";import{f as P,s as U}from"./index.mEg1Ak_K.js";import{d as i}from"./dayjs.min.8MX-qMPj.js";import X from"./MazBtn.-G1eJNIw.js";import"./MazDialogPromise.vue_vue_type_script_setup_true_lang.oATvaCbD.js";import"./use-theme-handler.7qAT_BPC.js";import"./date.GuA9KFVc.js";import"./capitalize._xbw7uFu.js";import"./MazSpinner.92kh8Ma1.js";import"./x-mark.VHiIF9qc.js";import"./chart.nVR4Bvnt.js";import"./check.fAFngIAg.js";import"./click-outside.2z45SkcO.js";import"./lazy-img.JAS2RLwT.js";import"./MazIcon.vue_vue_type_script_setup_true_lang.9dcQ_5eE.js";import"./inject-strict.aPooVEJM.js";import"./currency.B-QsTd8v.js";import"./getCountries.j5zCGMYw.js";import"./sleep.JASjerMi.js";const Y={class:"m-picker-time__column__items"},Z=W({__name:"MazPickerTime",props:{modelValue:{type:[String,Object],default:void 0},calendarDate:{type:String,required:!0},formatterOptions:{type:Object,required:!0},locale:{type:String,required:!0},color:{type:String,required:!0},isOpen:{type:Boolean,required:!0},hasDate:{type:Boolean,required:!0},minuteInterval:{type:Number,required:!0},disabledHours:{type:Array,default:void 0},format:{type:String,required:!0},isHour12:{type:Boolean,required:!0},minDate:{type:String,default:void 0},maxDate:{type:String,default:void 0},disabled:{type:Boolean,required:!0}},emits:["update:model-value"],setup(p,{emit:$}){const o=p,T=e=>{if(!o.disabledHours)return e;const t=Array.from({length:24},(a,u)=>u).filter(a=>{var u;return!((u=o.disabledHours)!=null&&u.includes(a))||!0}),r=P(t,e);return r!==e&&q("hour",i(s.value).set("hour",r)),r},z=$,l=B(),m=B(),v=n(()=>typeof s.value=="string"?T(i(s.value).get("hour")):void 0),A=n(()=>typeof s.value=="string"?P(H.value.map(({value:e})=>e.get("minute")),i(s.value).get("minute")):void 0),C=e=>{if(o.isHour12){const r=_.value==="pm"?e+12:e;return r===12?0:r===24?12:r}else return e},N=n(()=>Array.from({length:o.isHour12?12:24},(e,t)=>t).map(e=>{const t=e+(o.isHour12?1:0),r=C(t),a=i(s.value).set("hour",r),u=j(r)||(o.minDate&&s.value?i(o.minDate).isAfter(a,"hour"):!1)||(o.maxDate&&s.value?i(o.maxDate).isBefore(a,"hour"):!1);return{label:`${t<10?"0":""}${t}`,value:i(s.value).set("hour",r),isDisabled:u}})),H=n(()=>{const e=Math.floor(60/o.minuteInterval)-0;return Array.from({length:e},(t,r)=>r*o.minuteInterval).map(t=>{const r=i(s.value).set("minute",t),a=(o.minDate&&s.value?i(o.minDate).isAfter(r,"minute"):!1)||(o.maxDate&&s.value?i(o.maxDate).isBefore(r,"minute"):!1);return{label:`${t<10?"0":""}${t}`,value:r,isDisabled:a}})}),_=n(()=>typeof v.value=="number"?v.value>=12?"pm":"am":void 0),O=n(()=>o.isHour12?[{label:"AM",value:"am"},{label:"PM",value:"pm"}]:[]),V=n(()=>{const e=[{identifier:"hour",values:N.value},{identifier:"minute",values:H.value}];return o.isHour12&&e.push({identifier:"ampm",values:O.value}),e}),s=n({get:()=>o.modelValue,set:e=>{z("update:model-value",e)}});w(()=>o.isOpen,async e=>{var t;if(e){if(await h(),l.value){const r=l.value.querySelector(".m-picker-time__column .m-btn"),a=r==null?void 0:r.offsetHeight,c=((t=l.value)==null?void 0:t.offsetHeight)/2-a/2;m.value=c/16}k(!1)}},{immediate:!0}),w(()=>o.modelValue,async(e,t)=>{e!==t&&(await h(),k(!0))},{immediate:!0});const k=e=>{f("hour",e),f("minute",e),o.isHour12&&f("ampm",e)},j=e=>(o.disabledHours&&o.disabledHours.includes(e))??!1,D=(e,t)=>t==="am"||t==="pm"?_.value===t:e==="hour"?v.value===t.get(e):e==="minute"?A.value===t.get(e):!1,f=async(e,t=!0)=>{if(l.value){const r=l.value.querySelector(`.m-picker-time__column__${e}`),a=l.value.querySelector(`.m-picker-time__column__${e} .--is-selected`);m.value&&r&&a&&l.value&&(await h(),U(r,a,m.value*16,t))}},q=async(e,t)=>{const r=i(s.value);if(e==="hour"&&typeof t=="object"&&(s.value=r.set("hour",t.get("hour")).format()),e==="minute"&&typeof t=="object"){const a=r.set("minute",t.get("minute"));s.value=a.format()}if(e==="ampm"&&(_.value!==t||!v.value)&&(t==="am"&&(s.value=r.set("hour",r.get("hour")).subtract(12,"hour").format()),t==="pm")){const a=r.get("hour"),u=a+12>12&&a+12<24?a+12:a===0?12:a;s.value=r.set("hour",u).format()}await h(),f(e)};return(e,t)=>(d(),y("div",{ref_key:"MazPickerTime",ref:l,class:g(["m-picker-time",{"--has-date":p.hasDate}])},[(d(!0),y(x,null,M(V.value,({values:r,identifier:a},u)=>(d(),y("div",{key:u,class:g(["m-picker-time__column",[`m-picker-time__column__${a}`]])},[b("div",{style:S({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4),b("div",Y,[(d(!0),y(x,null,M(r,({value:c,label:I,isDisabled:L},F)=>(d(),E(X,{key:F,size:"xs",color:D(a,c)?p.color:"transparent",class:g({"--is-selected":D(a,c)}),disabled:L||p.disabled,type:"button",onClick:Q(ee=>q(a,c),["stop"])},{default:G(()=>[K(J(I),1)]),_:2},1032,["color","class","disabled","onClick"]))),128))]),b("div",{style:S({height:`${m.value}rem`}),class:"m-picker-time__column__divider"},null,4)],2))),128))],2))}}),be=R(Z,[["__scopeId","data-v-a399bbf2"]]);export{be as default};
