import{h as f,g as n,j as L}from"./framework.MQNg5qyc.js";function T(){return typeof document<"u"}const d={darkClass:"dark",lightClass:"light",storageThemeKey:"theme",storageThemeValueDark:"dark",storageThemeValueLight:"light",storageThemeValueSystem:"system"},m=f("system"),s=f("system");function c({darkClass:e,lightClass:a,storageThemeKey:l,storageThemeValueDark:t,setLocalStorageValue:o=!0,setSelectedTheme:u=!0}){T()&&(document.documentElement.classList.remove(a),document.documentElement.classList.add(e),m.value=t,u&&(s.value=t),o&&(localStorage[l]=t))}function g({darkClass:e,lightClass:a,storageThemeKey:l,storageThemeValueLight:t,setLocalStorageValue:o=!0,setSelectedTheme:u=!0}){T()&&(document.documentElement.classList.remove(e),document.documentElement.classList.add(a),m.value=t,u&&(s.value=t),o&&(localStorage[l]=t))}function y(e){T()&&(document.documentElement.classList.remove(e.darkClass),document.documentElement.classList.remove(e.lightClass),m.value=e.storageThemeValueSystem,s.value=e.storageThemeValueSystem,e.setLocalStorageValue&&(localStorage[e.storageThemeKey]=e.storageThemeValueSystem),v({...e,setSelectedTheme:!1}))}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function v(e){T()&&(e.onlyWithStoredValue?localStorage[e.storageThemeKey]===e.storageThemeValueDark||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&h()?c({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):(localStorage[e.storageThemeKey]===e.storageThemeValueLight||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&!h())&&g({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):localStorage[e.storageThemeKey]===e.storageThemeValueDark||!(e.storageThemeKey in localStorage)&&h()||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&h()?c({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):g({...e,setLocalStorageValue:!1,setSelectedTheme:!1}))}function S({shouldSetDarkMode:e,...a}){return typeof e!="boolean"?y(a):e?c(a):g(a)}function K(e){return m.value===e.storageThemeValueDark?g(e):c(e)}function C(e=d){const a={...d,...e},l=n(()=>s.value===a.storageThemeValueDark),t=n(()=>s.value===a.storageThemeValueLight),o=n(()=>s.value===a.storageThemeValueSystem);return L(()=>{localStorage[a.storageThemeKey]&&(m.value=localStorage[a.storageThemeKey],s.value=localStorage[a.storageThemeKey])}),{autoSetTheme:u=>v({...a,...u}),toggleTheme:()=>K(a),setSystemTheme:()=>y({...a,setLocalStorageValue:!0}),setDarkTheme:()=>S({...a,shouldSetDarkMode:!0}),setLightTheme:()=>S({...a,shouldSetDarkMode:!1}),hasDarkTheme:l,hasLightTheme:t,hasSystemTheme:o,theme:m,selectedTheme:s}}const D=f(),r=f([]),k=(e,a)=>new Promise((l,t)=>{r.value=[...r.value,{id:e,isActive:!0,resolve:async()=>{await(a==null?void 0:a()),l(!0)},reject:t}]}),V=e=>(r.value=r.value.filter(({id:a})=>a!==e),r.value),i=(e,a,l=!1)=>{var t;a&&((t=a[e])==null||t.call(a,l),a.isActive=!1,setTimeout(()=>{V(a.id)},500))},w=()=>({confirmDialogData:D,dialogState:r,showDialogAndWaitChoice:k,removeDialogFromState:V,rejectDialog:(e,a=!1)=>i("reject",e,a),resolveDialog:(e,a=!1)=>i("resolve",e,a)});export{w as a,T as i,C as u};
