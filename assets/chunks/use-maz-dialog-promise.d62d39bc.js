import{u as A,d,A as C,q as g}from"./framework.9757f4a9.js";const m="--backdrop-present",b=()=>{document.documentElement.classList.add(m)},k=async()=>{document.querySelector(".m-backdrop.--present")||document.documentElement.classList.remove(m)},D=A({inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},teleportSelector:{type:String,default:"body"},beforeClose:{type:Function,default:void 0},persistent:{type:Boolean,default:!1},noCloseOnEscKey:{type:Boolean,default:!1},transitionName:{type:String,default:"backdrop-anim"},backdropClass:{type:[Array,String,Object],default:void 0},backdropContentClass:{type:[Array,String,Object],default:void 0}},emits:["open","before-close","close","update:model-value"],setup(t,{emit:e}){const s=d(t.modelValue),o=()=>{i(!1)},i=async n=>{var r;n||(e("before-close"),await((r=t.beforeClose)==null?void 0:r.call(t))),s.value=n},v=()=>{e("open")},y=()=>{e("update:model-value",!1),e("close"),c()},p=()=>{t.persistent||o()},l=n=>{!t.noCloseOnEscKey&&n.key==="Escape"&&!t.persistent&&o()},u=()=>{b(),document.addEventListener("keyup",l,!1)},c=()=>{document.removeEventListener("keyup",l),k()};return C(()=>{t.modelValue?u():c()}),g(()=>t.modelValue,n=>{s.value=n,n?u():c()}),{onBackdropAnimationEnter:v,onBackdropAnimationLeave:y,onBackdropClicked:p,close:o,present:s,toggleModal:i,onKeyPress:l}}});const E=d(),a=d([]),S=(t,e)=>new Promise((s,o)=>{a.value=[...a.value,{id:t,isActive:!0,resolve:async()=>{await(e==null?void 0:e()),s(!0)},reject:o}]}),f=t=>(a.value=a.value.filter(({id:e})=>e!==t),a.value),_=(t,e,s=!1)=>{var o;e&&((o=e[t])==null||o.call(e,s),e.isActive=!1,setTimeout(()=>{f(e.id)},500))},M=()=>({confirmDialogData:E,dialogState:a,showDialogAndWaitChoice:S,removeDialogFromState:f,rejectDialog:(t,e=!1)=>_("reject",t,e),resolveDialog:(t,e=!1)=>_("resolve",t,e)});export{D as _,M as u};
