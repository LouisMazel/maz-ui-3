import{h as u,g as n,j as V}from"./framework.02bfe7fb.js";const T={darkClass:"dark",lightClass:"light",storageThemeKey:"theme",storageThemeValueDark:"dark",storageThemeValueLight:"light",storageThemeValueSystem:"system"},o=u("system"),l=u("system");function c({darkClass:e,lightClass:t,storageThemeKey:s,storageThemeValueDark:a,setLocalStorageValue:r=!0,setInternalThemeValue:h=!0}){document.documentElement.classList.remove(t),document.documentElement.classList.add(e),o.value=a,h&&(l.value=a),r&&(localStorage[s]=a)}function g({darkClass:e,lightClass:t,storageThemeKey:s,storageThemeValueLight:a,setLocalStorageValue:r=!0,setInternalThemeValue:h=!0}){document.documentElement.classList.remove(e),document.documentElement.classList.add(t),o.value=a,h&&(l.value=a),r&&(localStorage[s]=a)}function S(e){document.documentElement.classList.remove(e.darkClass),document.documentElement.classList.remove(e.lightClass),o.value=e.storageThemeValueSystem,l.value=e.storageThemeValueSystem,e.setLocalStorageValue&&(localStorage[e.storageThemeKey]=e.storageThemeValueSystem),v({...e,setInternalThemeValue:!1})}function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function v(e){localStorage[e.storageThemeKey]===e.storageThemeValueDark||!(e.storageThemeKey in localStorage)&&i()||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&i()?c({...e,setLocalStorageValue:!1,setInternalThemeValue:!1}):g({...e,setLocalStorageValue:!1,setInternalThemeValue:!1})}function f({shouldSetDarkMode:e,...t}){return typeof e!="boolean"?S(t):e?c(t):g(t)}function L(e){return o.value===e.storageThemeValueDark?g(e):c(e)}function E(e=T){const t={...T,...e},s=n(()=>l.value===t.storageThemeValueDark),a=n(()=>l.value===t.storageThemeValueLight),r=n(()=>l.value===t.storageThemeValueSystem);return V(()=>{localStorage[t.storageThemeKey]&&(o.value=localStorage[t.storageThemeKey],l.value=localStorage[t.storageThemeKey])}),{autoSetTheme:()=>v(t),toggleTheme:()=>L(t),setSystemTheme:()=>S({...t,setLocalStorageValue:!0}),setDarkTheme:()=>f({...t,shouldSetDarkMode:!0}),setLightTheme:()=>f({...t,shouldSetDarkMode:!1}),hasDarkTheme:s,hasLightTheme:a,hasSystemTheme:r,theme:o,internalTheme:l}}const D=u(),m=u([]),k=(e,t)=>new Promise((s,a)=>{m.value=[...m.value,{id:e,isActive:!0,resolve:async()=>{await(t==null?void 0:t()),s(!0)},reject:a}]}),y=e=>(m.value=m.value.filter(({id:t})=>t!==e),m.value),d=(e,t,s=!1)=>{var a;t&&((a=t[e])==null||a.call(t,s),t.isActive=!1,setTimeout(()=>{y(t.id)},500))},w=()=>({confirmDialogData:D,dialogState:m,showDialogAndWaitChoice:k,removeDialogFromState:y,rejectDialog:(e,t=!1)=>d("reject",e,t),resolveDialog:(e,t=!1)=>d("resolve",e,t)});export{E as a,w as u};
