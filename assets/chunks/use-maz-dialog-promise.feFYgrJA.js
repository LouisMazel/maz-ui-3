import{h as T,g as n,j as L}from"./framework.MQNg5qyc.js";function f(){return typeof document<"u"}const d={darkClass:"dark",lightClass:"light",storageThemeKey:"theme",storageThemeValueDark:"dark",storageThemeValueLight:"light",storageThemeValueSystem:"system"},m=T("system"),s=T("system");function h({darkClass:e,lightClass:t,storageThemeKey:l,storageThemeValueDark:a,setLocalStorageValue:o=!0,setSelectedTheme:u=!0}){f()&&(document.documentElement.classList.remove(t),document.documentElement.classList.add(e),m.value=a,u&&(s.value=a),o&&(localStorage[l]=a))}function g({darkClass:e,lightClass:t,storageThemeKey:l,storageThemeValueLight:a,setLocalStorageValue:o=!0,setSelectedTheme:u=!0}){f()&&(document.documentElement.classList.remove(e),document.documentElement.classList.add(t),m.value=a,u&&(s.value=a),o&&(localStorage[l]=a))}function y(e){f()&&(document.documentElement.classList.remove(e.darkClass),document.documentElement.classList.remove(e.lightClass),m.value=e.storageThemeValueSystem,s.value=e.storageThemeValueSystem,e.setLocalStorageValue&&(localStorage[e.storageThemeKey]=e.storageThemeValueSystem),v({...e,setSelectedTheme:!1}))}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function v(e){f()&&(e.onlyWithStoredValue?localStorage[e.storageThemeKey]===e.storageThemeValueDark||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&c()?h({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):(localStorage[e.storageThemeKey]===e.storageThemeValueLight||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&!c())&&g({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):localStorage[e.storageThemeKey]===e.storageThemeValueDark||!(e.storageThemeKey in localStorage)&&c()||localStorage[e.storageThemeKey]===e.storageThemeValueSystem&&c()?h({...e,setLocalStorageValue:!1,setSelectedTheme:!1}):g({...e,setLocalStorageValue:!1,setSelectedTheme:!1}))}function S({shouldSetDarkMode:e,...t}){return typeof e!="boolean"?y(t):e?h(t):g(t)}function K(e){return m.value===e.storageThemeValueDark?g(e):h(e)}function C(e=d){const t={...d,...e},l=n(()=>s.value===t.storageThemeValueDark),a=n(()=>s.value===t.storageThemeValueLight),o=n(()=>s.value===t.storageThemeValueSystem);return L(()=>{localStorage[t.storageThemeKey]&&(m.value=localStorage[t.storageThemeKey],s.value=localStorage[t.storageThemeKey])}),{autoSetTheme:u=>v({...t,...u}),toggleTheme:()=>K(t),setSystemTheme:()=>y({...t,setLocalStorageValue:!0}),setDarkTheme:()=>S({...t,shouldSetDarkMode:!0}),setLightTheme:()=>S({...t,shouldSetDarkMode:!1}),hasDarkTheme:l,hasLightTheme:a,hasSystemTheme:o,theme:m,selectedTheme:s}}const D=T(),r=T([]),k=(e,t)=>new Promise((l,a)=>{r.value=[...r.value,{id:e,isActive:!0,resolve:async()=>{await(t==null?void 0:t()),l(!0)},reject:a}]}),V=e=>(r.value=r.value.filter(({id:t})=>t!==e),r.value),i=(e,t,l=!1)=>{var a;t&&((a=t[e])==null||a.call(t,l),t.isActive=!1,setTimeout(()=>{V(t.id)},500))},w=()=>({confirmDialogData:D,dialogState:r,showDialogAndWaitChoice:k,removeDialogFromState:V,rejectDialog:(e,t="cancel")=>i("reject",e,t),resolveDialog:(e,t="accept")=>i("resolve",e,t)});export{w as a,f as i,C as u};
